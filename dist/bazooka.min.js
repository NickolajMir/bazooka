(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.Baz=e()}})(function(){var e,t,r;return function n(e,t,r){function i(o,s){if(!t[o]){if(!e[o]){var u=typeof require=="function"&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var d=t[o]={exports:{}};e[o][0].call(d.exports,function(t){var r=e[o][1][t];return i(r?r:t)},d,d.exports,n,e,t,r)}return t[o].exports}var a=typeof require=="function"&&require;for(var o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,r){var n="Function.prototype.bind called on incompatible ";var i=Array.prototype.slice;var a=Object.prototype.toString;var o="[object Function]";t.exports=function s(e){var t=this;if(typeof t!=="function"||a.call(t)!==o){throw new TypeError(n+t)}var r=i.call(arguments,1);var s=function(){if(this instanceof c){var n=t.apply(this,r.concat(i.call(arguments)));if(Object(n)===n){return n}return this}else{return t.apply(e,r.concat(i.call(arguments)))}};var u=Math.max(0,t.length-r.length);var f=[];for(var d=0;d<u;d++){f.push("$"+d)}var c=Function("binder","return function ("+f.join(",")+"){ return binder.apply(this,arguments); }")(s);if(t.prototype){var v=function l(){};v.prototype=t.prototype;c.prototype=new v;v.prototype=null}return c}},{}],2:[function(e,t,r){var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;var i=window.WeakMap;if(typeof i==="undefined"){var a=Object.defineProperty;var o=Date.now()%1e9;i=function(){this.name="__st"+(Math.random()*1e9>>>0)+(o++ +"__")};i.prototype={set:function(e,t){var r=e[this.name];if(r&&r[0]===e)r[1]=t;else a(e,this.name,{value:[e,t],writable:true});return this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:undefined},"delete":function(e){var t=e[this.name];if(!t)return false;var r=t[0]===e;t[0]=t[1]=undefined;return r},has:function(e){var t=e[this.name];if(!t)return false;return t[0]===e}}}var s=new i;var u=window.msSetImmediate;if(!u){var f=[];var d=String(Math.random());window.addEventListener("message",function(e){if(e.data===d){var t=f;f=[];t.forEach(function(e){e()})}});u=function(e){f.push(e);window.postMessage(d,"*")}}var c=false;var v=[];function l(e){v.push(e);if(!c){c=true;u(p)}}function h(e){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(e)||e}function p(){c=false;var e=v;v=[];e.sort(function(e,t){return e.uid_-t.uid_});var t=false;e.forEach(function(e){var r=e.takeRecords();b(e);if(r.length){e.callback_(r,e);t=true}});if(t)p()}function b(e){e.nodes_.forEach(function(t){var r=s.get(t);if(!r)return;r.forEach(function(t){if(t.observer===e)t.removeTransientObservers()})})}function g(e,t){for(var r=e;r;r=r.parentNode){var n=s.get(r);if(n){for(var i=0;i<n.length;i++){var a=n[i];var o=a.options;if(r!==e&&!o.subtree)continue;var u=t(o);if(u)a.enqueue(u)}}}}var m=0;function w(e){this.callback_=e;this.nodes_=[];this.records_=[];this.uid_=++m}w.prototype={observe:function(e,t){e=h(e);if(!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData){throw new SyntaxError}var r=s.get(e);if(!r)s.set(e,r=[]);var n;for(var i=0;i<r.length;i++){if(r[i].observer===this){n=r[i];n.removeListeners();n.options=t;break}}if(!n){n=new S(this,e,t);r.push(n);this.nodes_.push(e)}n.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){var t=s.get(e);for(var r=0;r<t.length;r++){var n=t[r];if(n.observer===this){n.removeListeners();t.splice(r,1);break}}},this);this.records_=[]},takeRecords:function(){var e=this.records_;this.records_=[];return e}};function y(e,t){this.type=e;this.target=t;this.addedNodes=[];this.removedNodes=[];this.previousSibling=null;this.nextSibling=null;this.attributeName=null;this.attributeNamespace=null;this.oldValue=null}function O(e){var t=new y(e.type,e.target);t.addedNodes=e.addedNodes.slice();t.removedNodes=e.removedNodes.slice();t.previousSibling=e.previousSibling;t.nextSibling=e.nextSibling;t.attributeName=e.attributeName;t.attributeNamespace=e.attributeNamespace;t.oldValue=e.oldValue;return t}var _,N;function M(e,t){return _=new y(e,t)}function D(e){if(N)return N;N=O(_);N.oldValue=e;return N}function L(){_=N=undefined}function E(e){return e===N||e===_}function x(e,t){if(e===t)return e;if(N&&E(e))return N;return null}function S(e,t,r){this.observer=e;this.target=t;this.options=r;this.transientObservedNodes=[]}S.prototype={enqueue:function(e){var t=this.observer.records_;var r=t.length;if(t.length>0){var n=t[r-1];var i=x(n,e);if(i){t[r-1]=i;return}}else{l(this.observer)}t[r]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;if(t.attributes)e.addEventListener("DOMAttrModified",this,true);if(t.characterData)e.addEventListener("DOMCharacterDataModified",this,true);if(t.childList)e.addEventListener("DOMNodeInserted",this,true);if(t.childList||t.subtree)e.addEventListener("DOMNodeRemoved",this,true)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;if(t.attributes)e.removeEventListener("DOMAttrModified",this,true);if(t.characterData)e.removeEventListener("DOMCharacterDataModified",this,true);if(t.childList)e.removeEventListener("DOMNodeInserted",this,true);if(t.childList||t.subtree)e.removeEventListener("DOMNodeRemoved",this,true)},addTransientObserver:function(e){if(e===this.target)return;this.addListeners_(e);this.transientObservedNodes.push(e);var t=s.get(e);if(!t)s.set(e,t=[]);t.push(this)},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[];e.forEach(function(e){this.removeListeners_(e);var t=s.get(e);for(var r=0;r<t.length;r++){if(t[r]===this){t.splice(r,1);break}}},this)},handleEvent:function(e){e.stopImmediatePropagation();switch(e.type){case"DOMAttrModified":var t=e.attrName;var r=e.relatedNode.namespaceURI;var n=e.target;var i=new M("attributes",n);i.attributeName=t;i.attributeNamespace=r;var a=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;g(n,function(e){if(!e.attributes)return;if(e.attributeFilter&&e.attributeFilter.length&&e.attributeFilter.indexOf(t)===-1&&e.attributeFilter.indexOf(r)===-1){return}if(e.attributeOldValue)return D(a);return i});break;case"DOMCharacterDataModified":var n=e.target;var i=M("characterData",n);var a=e.prevValue;g(n,function(e){if(!e.characterData)return;if(e.characterDataOldValue)return D(a);return i});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var n=e.relatedNode;var o=e.target;var s,u;if(e.type==="DOMNodeInserted"){s=[o];u=[]}else{s=[];u=[o]}var f=o.previousSibling;var d=o.nextSibling;var i=M("childList",n);i.addedNodes=s;i.removedNodes=u;i.previousSibling=f;i.nextSibling=d;g(n,function(e){if(!e.childList)return;return i})}L()}};if(!n){n=w}t.exports=n},{}],3:[function(e,t,r){"use strict";var n=["data-bazid","data-bazooka"];var i=/^(?:\{.*\}|\[.*\])$/;var a=/^data-([a-z\d\-]+)$/;var o=/-([a-z])/gi;var s=function(e,t){return t.toUpperCase()};function u(e,t,r){if(typeof r.value!=="string"){return t}if(!a.test(r.name)||n.indexOf(r.name)!==-1){return t}var u=r.name.match(a)[1];if(e){e=e.concat("-");if(e===u.slice(0,e.length)){u=u.slice(e.length)}else{return t}}var f=u.replace(o,s);var d;switch(r.value){case"true":d=true;break;case"false":d=false;break;case"null":d=null;break;default:try{if(r.value===+r.value+""){d=+r.value}else if(i.test(r.value)){d=JSON.parse(r.value)}else{d=r.value}}catch(c){return t}}t[f]=d;return t}function f(e,t){return Array.prototype.reduce.call(t.attributes,u.bind(null,e),{})}var d=function(e,t){if(typeof e==="string"&&t===void 0){return f.bind(null,e)}if(t===void 0){t=e;return f("",t)}return f(e,t)};t.exports={getAttrs:d}},{}],4:[function(e,t,r){"use strict";var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(!n){n=e("mutation-observer")}if(!Function.prototype.bind){Function.prototype.bind=e("function-bind")}var i=0;var a={};var o={};var s={};function u(t){if(o[t]===void 0){o[t]=e(t)}return o[t]}function f(e,t){var r=e.id;if(a[r]===void 0){a[r]=[]}if(a[r].indexOf(t)===-1){a[r].push(t);var n=u(t);var i;if(n.bazFunc){i=n.bazFunc}else{i=n}i(e.__wrapped__)}}function d(e){var t=e.getAttribute("data-bazid");if(t==null){t=(i++).toString();e.setAttribute("data-bazid",t);s[t]=this}this.__wrapped__=e;this.id=t}d.prototype.constructor=d;function c(e){var t=e.getAttribute("data-bazooka");var r=new d(e);f(r,t)}var v=function(e){if(e instanceof d){return e}return new d(e)};v.BazookaWrapper=d;v.h=e("./helpers.js");v.register=function(e){for(var t in e){o[t]=e[t]}};v.refresh=function(e){e=e||document.body;for(var t in s){if(s[t]&&!s[t].__wrapped__.parentNode){s[t]=null;a[t]=[]}}Array.prototype.forEach.call(e.querySelectorAll("[data-bazooka]:not([data-bazid])"),c)};function l(e){v.refresh(e.target)}function h(e){e.forEach(l)}v.watch=function(e){var t=new n(h);e=e||document.body;v.refresh(e);t.observe(e,{childList:true,subtree:true});return t.disconnect.bind(t)};t.exports=v},{"./helpers.js":3,"function-bind":1,"mutation-observer":2}]},{},[4])(4)});
